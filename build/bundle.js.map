{"version":3,"file":"bundle.js","sources":["../src/ServiceWorkerProvider.js","../src/Message.js","../src/UpdatePrompt.js"],"sourcesContent":["// ✂️ code from: https://github.com/facebook/create-react-app/issues/5316#issuecomment-496292914\n\nimport React, { useMemo, useState } from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst ServiceWorkerContext = React.createContext();\n\nexport function ServiceWorkerProvider(props) {\n  const [waiting, setServiceWorker] = useState(null);\n  const [assetsUpdateReady, setAssetsUpdateReady] = useState(false);\n  const [assetsCached, setAssetsCached] = useState(false);\n\n  const value = useMemo(\n    () => ({\n      assetsUpdateReady,\n      assetsCached,\n      // Call when the user confirm update of application and reload page\n      updateAssets: () => {\n        if (waiting) {\n          waiting.addEventListener(\"statechange\", () => {\n            if (waiting.state === \"activated\") {\n              window.location.reload();\n            }\n          });\n\n          waiting.postMessage({ type: \"SKIP_WAITING\" });\n        }\n      }\n    }),\n    [assetsCached, assetsUpdateReady, waiting]\n  );\n\n  // Once on component mounted subscribe to Update and Succes events in\n  // CRA's service worker wrapper\n  React.useEffect(() => {\n    props.register({\n      onRegister: registration => {\n        setServiceWorker(registration.waiting);\n        setAssetsUpdateReady(!!registration.waiting);\n      },\n      onUpdate: registration => {\n        setServiceWorker(registration.waiting);\n        setAssetsUpdateReady(true);\n      },\n      onSuccess: () => {\n        setAssetsCached(true);\n      }\n    });\n  }, []);\n\n  return <ServiceWorkerContext.Provider value={value} {...props} />;\n}\nServiceWorkerProvider.propTypes = {\n  register: PropTypes.func.isRequired\n};\n\nexport function useServiceWorker() {\n  const context = React.useContext(ServiceWorkerContext);\n\n  if (!context) {\n    throw new Error(\n      \"useServiceWorker must be used within a ServiceWorkerProvider\"\n    );\n  }\n\n  return context;\n}\n\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst buttonCommon = {\n  display: \"flex\",\n  border: \"none\",\n  cursor: \"pointer\",\n  outline: \"inherit\",\n  height: \"2rem\",\n  padding: \"0 1rem\",\n  borderRadius: \"3px\"\n};\nconst styles = {\n  prompt: {\n    display: \"flex\",\n    position: \"absolute\",\n    bottom: \"3rem\",\n    right: \"9rem\",\n    backgroundColor: \"hsl(209, 61%, 16%)\",\n    zIndex: 1,\n    color: \"white\",\n    padding: \"0 1rem 0 2rem\",\n    borderRadius: \"3px\",\n    alignItems: \"center\"\n  },\n  hidden: {\n    border: 0,\n    clip: \"rect(0 0 0 0)\",\n    height: \"1px\",\n    width: \"1px\",\n    margin: \"-1px\",\n    padding: 0,\n    overflow: \"hidden\",\n    position: \"absolute\"\n  },\n  loading: {\n    display: \"inline\",\n    marginLeft: \".5rem\"\n  },\n  button: {\n    background: \"hsl(209, 34%, 30%)\",\n    color: \"hsl(212, 33%, 89%)\",\n    ...buttonCommon,\n    textTransform: \"uppercase\",\n    marginLeft: \"2rem\",\n    fontWeight: \"bold\",\n    \"&:hover\": {\n      background: \"hsl(209, 28%, 39%)\"\n    }\n  },\n  dismiss: {\n    ...buttonCommon,\n    background: \"none\",\n    marginLeft: \"1rem\",\n    color: \"hsl(212, 33%, 89%)\"\n  }\n};\n\nexport function Message(props) {\n  return (\n    <div\n        className={props.className}\n        style={props.visible ? styles.prompt : styles.hidden}\n      >\n        <p>{props.message}</p>\n        <button\n          style={styles.button}\n          type=\"button\"\n          onClick={props.onClick}\n        >\n          {props.buttonText}\n          {/* {loading && (\n            <Icon className={styles.loading} size=\"SMALL\" svg={Loading} />\n          )} */}\n        </button>\n        <button style={styles.dismiss} type=\"button\" onClick={props.onDismiss}>\n          {/* <ClearIcon\n            height=\"1rem\"\n            width=\"1rem\"\n            fill=\"hsla(255, 100%, 100%, 0.3)\"\n          /> */}\n          X\n        </button>\n      </div>\n  );\n}\nMessage.propTypes = {\n  className: PropTypes.string,\n  message: PropTypes.string.isRequired,\n  buttonText: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  onDismiss: PropTypes.func,\n  visible: PropTypes.bool\n}","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useServiceWorker } from \"./ServiceWorkerProvider\";\nimport { Message } from \"./Message\";\n// import Icon from \"./components/common/Icon\";\n// import Loading from \"./assets/svg/loading.svg\";\n// import ClearIcon from \"./assets/svg/Clear\";\n\nexport function UpdatePrompt(props) {\n  const { updateAssets, assetsUpdateReady } = useServiceWorker();\n  const [loading, setLoading] = useState(false);\n  const [visible, setVisible] = useState(true);\n\n  const handleClick = () => {\n    setLoading(true);\n    updateAssets();\n  };\n\n  const dismiss = () => setVisible(false);\n\n  return (\n    visible && (\n      <Message \n        {...props}\n        onClick={handleClick}\n        onDismiss={dismiss}\n        visible={visible}\n      />\n    )\n  );\n}\n\nUpdatePrompt.propTypes = {\n  className: PropTypes.string,\n  message: PropTypes.string.isRequired,\n  buttonText: PropTypes.string.isRequired\n};\n\n"],"names":["ServiceWorkerContext","React","createContext","ServiceWorkerProvider","props","useState","waiting","setServiceWorker","assetsUpdateReady","setAssetsUpdateReady","assetsCached","setAssetsCached","value","useMemo","updateAssets","addEventListener","state","window","location","reload","postMessage","type","useEffect","register","onRegister","registration","onUpdate","onSuccess","propTypes","PropTypes","func","isRequired","useServiceWorker","context","useContext","Error","buttonCommon","display","border","cursor","outline","height","padding","borderRadius","styles","prompt","position","bottom","right","backgroundColor","zIndex","color","alignItems","hidden","clip","width","margin","overflow","loading","marginLeft","button","background","textTransform","fontWeight","dismiss","Message","className","visible","message","onClick","buttonText","onDismiss","string","bool","UpdatePrompt","setLoading","setVisible","handleClick"],"mappings":"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"}